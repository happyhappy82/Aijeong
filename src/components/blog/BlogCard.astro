---
import { formatDate } from "../../lib/utils";
import Badge from "../ui/Badge.astro";
import type { BlogPost } from "../../lib/types";

interface Props {
  post: BlogPost;
}

const { post } = Astro.props;
---

<a href={`/blog/${post.slug}`} class="group block">
  <article class="flex gap-5 md:gap-8 py-6">
    <div class="w-[120px] h-[120px] md:w-[180px] md:h-[180px] flex-shrink-0 rounded-xl overflow-hidden">
      {post.coverImage ? (
        <img
          src={post.coverImage}
          alt={post.title}
          class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
        />
      ) : (
        <div class="w-full h-full bg-gradient-to-br from-accent/20 to-accent/5 flex items-center justify-center">
          <svg class="w-10 h-10 md:w-14 md:h-14 text-accent/40" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path>
            <polyline points="14 2 14 8 20 8"></polyline>
            <line x1="16" y1="13" x2="8" y2="13"></line>
            <line x1="16" y1="17" x2="8" y2="17"></line>
            <line x1="10" y1="9" x2="8" y2="9"></line>
          </svg>
        </div>
      )}
    </div>
    <div class="flex flex-col justify-center min-w-0 flex-1">
      <div class="flex items-center gap-2 mb-2">
        <Badge variant="accent">
          {post.category}
        </Badge>
      </div>
      <h3 class="text-lg md:text-xl font-bold leading-snug line-clamp-2 group-hover:text-accent transition-colors">
        {post.title}
      </h3>
      {post.summary && (
        <p class="mt-2 text-sm md:text-base text-muted-foreground line-clamp-3 leading-relaxed">
          {post.summary}
        </p>
      )}
      <div class="mt-3 flex items-center gap-4 text-xs text-muted-foreground">
        <span class="flex items-center gap-1">
          <svg class="w-3.5 h-3.5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6"></line>
            <line x1="8" y1="2" x2="8" y2="6"></line>
            <line x1="3" y1="10" x2="21" y2="10"></line>
          </svg>
          {formatDate(post.date)}
        </span>
        <span class="flex items-center gap-1">
          <svg class="w-3.5 h-3.5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
          {post.readingTime}분 읽기
        </span>
      </div>
    </div>
  </article>
</a>
